// ==UserScript==
// @name     Counting utilities v3
// @author   Counters LTD
// @version  1000002
// @include  *animebytes.tv/forums.php*threadid=556*
// @include  *animebyt.es/forums.php*threadid=556*
// @icon     http://animebytes.tv/favicon.ico
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue
// ==/UserScript==

/*
configuration explanation:
    applies to all of them:
        set values to `undefined` to leave them at their default values
    
    ///TODO: write the explanation for the rest of them
*/

//configure below
GM_setValue("digits_digitSetPresets", [0]);
GM_setValue("digits_hoverText", "Click me for cool music");
GM_setValue("digits_url", "https://www.youtube.com/watch?v=cPCLFtxpadE");
GM_setValue("digits_digitChooserPreset", 0);
GM_setValue("digits_digitBase", 10);
GM_setValue("nices", undefined);
GM_setValue("npEmojis", undefined);
GM_setValue("quickTexts", [["asd", "asd"], ["asdf", "asdf"]]);

(()=>{var t={343:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultConfig=e.digitSetPresets=e.digitChooserPresets=void 0,e.digitChooserPresets=[(t,e,i,n)=>n[0][t],(t,e,i,n)=>n[i%2][t],(t,e,i,n)=>{let s=0;return e.reverse().forEach(((t,e)=>{0===t&&(s=e+1)})),s=e.length-1-s,e.reverse(),i>=s?n[1][t]:n[0][t]}],e.digitSetPresets=[["https://mei.animebytes.tv/x1dEkFZKZps.gif","https://mei.animebytes.tv/bnb60Tz8ZNN.gif","https://mei.animebytes.tv/uy9okFjAxZR.gif","https://mei.animebytes.tv/vv3Ca74RDEU.gif","https://mei.animebytes.tv/OUSyO464lR8.gif","https://mei.animebytes.tv/z9SJ4Q7iCuu.gif","https://mei.animebytes.tv/Ja51PIgKTuI.gif","https://mei.animebytes.tv/QDtXWy3TEf1.gif","https://mei.animebytes.tv/LKogZHBk8z1.gif","https://mei.animebytes.tv/PKxtjSBHRSo.gif"],["https://mei.animebytes.tv/GoNnQmqpo9q.png","https://mei.animebytes.tv/PSn3VBd8BHb.png","https://mei.animebytes.tv/yO9Ao3cxs9B.png","https://mei.animebytes.tv/i7Sx2MXnEwh.png","https://mei.animebytes.tv/R9ndr8nnqQa.png","https://mei.animebytes.tv/CDtrpqNDVGW.png","https://mei.animebytes.tv/NzaNCisppBP.png","https://mei.animebytes.tv/ZemEFwuCBEa.png","https://mei.animebytes.tv/CKx0MyneGzC.png","https://mei.animebytes.tv/g465lPrAMjl.png"],["https://mei.animebytes.tv/vBhoqb8midp.png","https://mei.animebytes.tv/ZgURCRf6G5d.png","https://mei.animebytes.tv/OPPkZBkGe6K.png","https://mei.animebytes.tv/6kfoAIDPuLV.png","https://mei.animebytes.tv/jDH2t4eDChL.png","https://mei.animebytes.tv/Mx3rsvU5zio.png","https://mei.animebytes.tv/wTOiZ1kZNEj.png","https://mei.animebytes.tv/O6TWGgGtbe6.png","https://mei.animebytes.tv/8ZfOPHaEPZb.png","https://mei.animebytes.tv/bDxkDbErkMz.png"],["https://mei.animebytes.tv/Aa25k9Ssb2s.png","https://mei.animebytes.tv/L8kTVcMYCeq.png","https://mei.animebytes.tv/ZRUEPlDjXOA.png","https://mei.animebytes.tv/RW5FRPqb8nO.png","https://mei.animebytes.tv/0WcqW7T2OC2.png","https://mei.animebytes.tv/b1eOibkTKpG.png","https://mei.animebytes.tv/EVUelcsf6Nh.png","https://mei.animebytes.tv/oUmHTbDUwoh.png","https://mei.animebytes.tv/sDbdV4YXlvP.png","https://mei.animebytes.tv/woLN5JaBQuk.png","https://mei.animebytes.tv/k6Gt3oZScdC.png","https://mei.animebytes.tv/AIIyivbVJIB.png","https://mei.animebytes.tv/fvFNajIjSWY.png","https://mei.animebytes.tv/whbNAE7YR0w.png","https://mei.animebytes.tv/p8zeXn0xpIZ.png","https://mei.animebytes.tv/2JpT1QfpUb2.png","https://mei.animebytes.tv/4nQTv0Gm7Lp.png","https://mei.animebytes.tv/bFR9NJad4nY.png","https://mei.animebytes.tv/JOuWrURjU9g.png","https://mei.animebytes.tv/AUfAwjj4Hos.png"],["https://mei.animebytes.tv/bkPOEVfttTj.gif","https://mei.animebytes.tv/zwzYpntMlyz.gif","https://mei.animebytes.tv/FehaCYRLlIj.gif","https://mei.animebytes.tv/QVsA08Qm2e9.gif","https://mei.animebytes.tv/nxqlDOO7SRN.gif","https://mei.animebytes.tv/yHaQ2grDaRA.gif","https://mei.animebytes.tv/PKs0ENWAzqT.gif","https://mei.animebytes.tv/aQC8Us708Ij.gif","https://mei.animebytes.tv/ekGiJ5g15yS.gif","https://mei.animebytes.tv/VuZsA3fUkRU.gif"]],e.defaultConfig={fancyDigitConfig:{digitSets:[e.digitSetPresets[0]],hoverText:"Click me for cool music",url:"https://www.youtube.com/watch?v=cPCLFtxpadE",digitChooser:e.digitChooserPresets[0],digitBase:10},nices:["( ͡° ͜ʖ ͡°)","nice",";)","͡° ͜ʖ ͡ ","😉","Nice!","niceeee","👌 niice","[i]niiiice[/i]","N I C E","noice!"],newPageEmojis:["✨","🍾","🎉","🎈","🎆","🎇","🥳","🎊","🙌","🤗","👏","🍷","🍹","🍭","🍬","👻","🍰","🎂","🍡","🍩","🧁","🍨","💃","🤸","🍸","🍻","🥂","🍺","🎵","🎶"],quickTexts:[{text:"test",value:"this is a test"},{text:"test2",value:()=>"this is also a test"}],testing:!1},Object.freeze(e.defaultConfig)},415:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=e.NumberInput=e.Button=e.Paragraph=e.Element=void 0;class i{constructor(t){this.node=t}GetNode(){return this.node}}e.Element=i,e.Paragraph=class extends i{constructor(t,e){let i=document.createElement("p");i.innerHTML=t,e&&(i.id=e),super(i)}},e.Button=class extends i{constructor(t,e,i){let n=document.createElement("input");n.type="button",n.className="btn",n.value=t,e&&(n.onclick=e),i&&(n.id=i),super(n)}};class n extends i{constructor(t,e=1,i=1,s=1,o){let r=document.createElement("input");r.type="number",r.id=t,r.value=e.toString(),r.min=i.toString(),r.step=s.toString(),o&&(r.max=o.toString()),r.oninput=e=>n.numberInputs[t]=parseInt(r.value),super(r)}static GetInput(t){return n.numberInputs[t]}}e.NumberInput=n,n.numberInputs={};class s extends i{constructor(t,e,i){let n=document.createElement("select");n.name=t,n.id=e,i.forEach(((t,e)=>{let i=document.createElement("option");i.value=e.toString(),i.innerHTML=t,n.appendChild(i)})),n.onchange=t=>s.selectionIndices[e]=t.target.selectedIndex,super(n),s.selectionIndices[e]=0}static GetSelection(t){return s.selectionIndices[t]}}e.Selection=s,s.selectionIndices={}},463:()=>{Array.prototype.getUnique=function(){return this.filter(((t,e,i)=>i.indexOf(t)===e))},Array.prototype.randomPick=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.isPalindrome=function(){for(let t=0;t<=Math.floor(this.length/2);t++)if(this[t]!==this[this.length-t-1])return!1;return!0},String.prototype.bbSize=function(t){return"[size="+t+"]"+this.toString()+"[/size]"},String.prototype.bbAlign=function(t){return"[align="+t+"]"+this.toString()+"[/align]"},String.prototype.bbURL=function(t){return"[url="+t+"]"+this.toString()+"[/url]"},String.prototype.bbImage=function(t){return"[img"+(t?"="+t:"")+"]"+this.toString()+"[/img]"},String.prototype.bbColour=function(t){return"[color="+t+"]"+this.toString()+"[/color]"}},450:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),i(463);const r=o(i(343)),a=o(i(754)),u=i(415);let m=Object.assign({},r.defaultConfig),g=new class{constructor(){this.currentPageNum=NaN,this.lastPageNum=NaN,this.postCount=NaN,this.UpdateElems();let t=document.querySelector(".pagenums"),e=document.querySelectorAll(".post_block");if(void 0!==t){this.lastPageNum=parseInt(t.lastChild.textContent),NaN===this.lastPageNum&&(this.lastPageNum=parseInt(t.children[t.children.length-3].textContent));let e=t.querySelector(".nolink");void 0!==e&&(this.currentPageNum=parseInt(e.lastChild.textContent))}void 0!==e&&(this.postCount=e.length),this.layoutDiv=a.HTMLNodeFromText("<div style='display: block;text-align: center;padding:10px 10px 10px 10px;' class='' id='utilityButtons'></div>")}UpdateElems(){this.textBox=document.querySelector("#quickpost"),this.submitButton=document.querySelector("#post_button"),this.quickPostForm=document.querySelector("#quickpostform")}OnLastPage(){return this.currentPageNum===this.lastPageNum}NextNumber(t=!0){return t||this.OnLastPage()?25*(this.currentPageNum-1)+this.postCount+1:NaN}AppendText(t){this.UpdateElems(),this.textBox&&(this.textBox.value=this.textBox.value+t)}FocusToText(){this.UpdateElems(),this.textBox&&this.textBox.focus()}SubmitText(){this.UpdateElems(),this.submitButton&&this.submitButton.click()}InsertElementLayout(t){this.UpdateElems();let e=a.HTMLNodeFromText("<br style='display:block;margin:5px;0'/>");t.forEach(((i,n)=>{let s=this.layoutDiv.childNodes.length;i.forEach(((t,e)=>{(t instanceof u.Button||t instanceof u.Element)&&this.layoutDiv.appendChild(t.GetNode()),e!==i.length-1&&this.layoutDiv.appendChild(document.createTextNode(" "))})),n!==t.length-1&&s!=this.layoutDiv.childNodes.length&&this.layoutDiv.appendChild(e.cloneNode(!0))})),this.quickPostForm.appendChild(this.layoutDiv)}};{let t=GM_getValue("digits_digitSetPresets",void 0),e=GM_getValue("digits_hoverText",void 0),i=GM_getValue("digits_url",void 0),n=GM_getValue("digits_digitChooserPreset",void 0),s=GM_getValue("digits_digitBase",void 0),o=GM_getValue("nices",void 0),a=GM_getValue("npEmojis",void 0),u=GM_getValue("quickTexts",void 0);void 0!==t&&(m.fancyDigitConfig.digitSets=[],t.forEach((t=>m.fancyDigitConfig.digitSets.push(r.digitSetPresets[t])))),void 0!==e&&(m.fancyDigitConfig.hoverText=e),void 0!==i&&(m.fancyDigitConfig.url=i),void 0!==n&&(m.fancyDigitConfig.digitChooser=r.digitChooserPresets[n]),void 0!==s&&(m.fancyDigitConfig.digitBase=s),void 0!==o&&(m.nices=o),void 0!==a&&(m.newPageEmojis=a),void 0!==u&&(m.quickTexts=[],u.forEach((t=>m.quickTexts.push({text:t[0],value:t[1]}))))}let l=new u.Button("Next num",(()=>{g.AppendText(g.NextNumber()+"\n"),g.FocusToText()}),"nextNumButton"),p=new u.Button("Append n' send",(()=>{g.AppendText(g.NextNumber()+"\n"),g.FocusToText(),g.SubmitText()}),"quickNumButton"),c=new u.Button("Fancy",(()=>{N()}),"fancyNumButton"),h=new u.NumberInput("customNumberInput",g.NextNumber()),d=new u.Button("Custom Fancy",(()=>{N(u.NumberInput.GetInput("customNumberInput"))}),"fancyCustomNumButton"),f=new u.Selection("Quick text selection","quickTextSelection",m.quickTexts.map((t=>t.text))),b=new u.Button("Insert",(()=>{let t=u.Selection.GetSelection("quickTextSelection"),e=m.quickTexts[t];"string"==typeof e.value?g.AppendText(e.value):"function"==typeof e.value&&g.AppendText(e.value()),g.FocusToText()}),"quickTextInsertButton"),y=new u.Button("Test Cerfe's numbers",(()=>{let t=m;m.fancyDigitConfig.digitSets[0]=r.digitSetPresets[1],m.fancyDigitConfig.digitSets[1]=r.digitSetPresets[2],m.fancyDigitConfig.digitBase=10,m.fancyDigitConfig.digitChooser=r.digitChooserPresets[2],N(12300),N(1230),m=t}),"cerfeTestButton"),v=new u.Button("Test hennusk's numbers",(()=>{let t=m;m.fancyDigitConfig.digitSets[0]=r.digitSetPresets[3],m.fancyDigitConfig.digitSets[1]=r.digitSetPresets[3],m.fancyDigitConfig.digitBase=20,m.fancyDigitConfig.digitChooser=r.digitChooserPresets[0],N(177285),N(1019380),N(1693074),N(2535179),m=t}),"hennuskTestButton"),x=[[l,c,p],[h,d],[f,b],[new u.Paragraph((()=>{let t="Next 5 unique numbers: ";return a.NextNDigitiallyUnique(g.NextNumber(),5,!0,!0).forEach((e=>t+=e+", ")),t.slice(0,-2)})())],[new u.Paragraph((()=>{if(NaN===g.NextNumber())return"An unknown amount of time is left. (couldn't find post no)";let t=(new Date).getTime()-125537682e4,e=g.NextNumber()-1,i=t/e*(1e6-e)/36e5;return Math.floor(i/24)+" days are left. That makes around "+Math.floor(i/24/365.25*10)/10+" years."})(),void 0)]];function N(t){t||(t=g.NextNumber()),g.AppendText(a.GetFancyText(t,r.defaultConfig)+"\n\n"),g.FocusToText()}m.testing&&x.push([y,v]),g.InsertElementLayout(x)},754:(t,e,i)=>{"use strict";function n(t,e=10){let i=[];for(;0!==t;)i.push(t%e),t/=e,t=Math.floor(t);return i.reverse()}function s(t){let e=n(Math.abs(t),10);return e.length===e.getUnique().length}function o(t){if(t<=1)return!1;if(2===(t=Math.round(t)))return!0;if(t%2==0)return!1;for(let e=3;e<=Math.sqrt(t);e+=2)if(t%e==0)return!1;return!0}function r(t,e,i,n){let s=n.digitChooser(t,e,i,n.digitSets).bbImage(n.hoverText);return n.url?s.bbURL(n.url):s}Object.defineProperty(e,"__esModule",{value:!0}),e.GetFancyText=e.GetDigitText=e.IsPrime=e.NextNDigitiallyUnique=e.NextDigitallyUnique=e.IsDigitiallyUnique=e.HTMLNodeFromText=e.GetDigits=void 0,i(463),e.GetDigits=n,e.HTMLNodeFromText=function(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstChild.cloneNode(!0)},e.IsDigitiallyUnique=s,e.NextDigitallyUnique=function(t,e=!0,i=!1,n){for(let o=i?t:t+1;!n||Math.abs(t-o)<=n;o+=e?1:-1)if(s(o))return o},e.NextNDigitiallyUnique=function(t,e,i=!0,n=!1,o){let r=[];n||++t;for(let n=0;n<e;)s(t)&&(r.push(t),++n),t+=i?1:-1;return r},e.IsPrime=o,e.GetDigitText=r,e.GetFancyText=function(t,e){let i="",a=n(t,e.fancyDigitConfig.digitBase);a.forEach(((t,n)=>{i+=r(t,a,n,e.fancyDigitConfig)}));let u="";[{name:"prime",func:o},{name:"nice",func:t=>t%100==69},{name:"unique",func:s},{name:"palindromic",func:t=>n(t).isPalindrome()}].forEach((e=>{let i=e.name;i=e.func(t)?("is "+i).bbColour("green"):("isn't "+i).bbColour("red"),u+=i+" | "})),u=u.slice(0,-3);let m="";return t%100==69&&(m=e.nices.randomPick()),(t-1)%25==0&&(m=e.newPageEmojis.randomPick()+"NEW PAGE!"+e.newPageEmojis.randomPick()),(i+"\n"+t.toString().bbSize(1)+"\n"+u.bbSize(1)+"\n"+m.bbSize(1)).bbAlign("center")}}},e={};!function i(n){if(e[n])return e[n].exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}(450)})();